webpackJsonp([1,2],{23:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(62),i=n(58),o=n.n(i);new s.a({el:"#app",render:function(t){return t(o.a)}})},24:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(25),i=n.n(s),o=n(26),a=n.n(o);e.default={ctx:null,img:null,data:function(){return{segIdGen:0,isSetting:!1,isAddCoords:!1,currentSeg:null,original:[0,0],segments:[],results:""}},methods:{loadImg:function(t){var e=this.$refs.canvas.getContext("2d"),n=this.$refs.roads.getContext("2d"),s=new Image;s.onload=function(){e.canvas.height=s.height,e.canvas.width=s.width,n.canvas.height=s.height,n.canvas.width=s.width,e.drawImage(s,0,0,e.canvas.width,e.canvas.height),n.beginPath(),n.moveTo(0,0),n.lineTo(200,200),n.stroke()},s.src=URL.createObjectURL(t.target.files[0]),this.ctx=n,this.img=s},settingOriginal:function(){this.isSetting=!0,this.isAddCoords=!1},clickCanvas:function(t){console.log(t),t.ctrlKey||(this.isSetting?(this.original=[t.offsetX,t.offsetY],this.isSetting=!1):this.isAddCoords&&(this.currentSeg.coords.push([t.offsetX-this.original[0],t.offsetY-this.original[1]]),this.drawRoads()))},cleanState:function(){this.isSetting=!1,this.isAddCoords=!1,this.currentSeg=null},rightClickCanvas:function(t){t.preventDefault(),this.cleanState()},addSegment:function(){var t={id:this.segIdGen++,name:"No name",velocity:0,quantity:0,width:2,coords:[]};this.segments.push(t),this.cleanState(),this.currentSeg=t,this.isAddCoords=!0},addCoords:function(t,e){this.isAddCoords=!0,this.isSetting=!1,this.currentSeg=t},removeCoords:function(t){t||(t=this.currentSeg),console.log(t),t.coords.pop(),this.drawRoads()},saveSegment:function(){var t=a()(this.segments),e=t.coords.map(function(t){return{utm_lat:t[1],utm_lon:t[0]}});t.coords=e,this.results=t,console.log(this.results)},drawRoads:function(){var t=this.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height);var e=!0,n=!1,s=void 0;try{for(var o,a=i()(this.segments);!(e=(o=a.next()).done);e=!0){var r=o.value;if(r.coords[0]){t.beginPath(),t.moveTo(r.coords[0][0],r.coords[0][1]);for(var c=1,d=r.coords.length;c<d;++c){var l=r.coords[c];t.lineTo(l[0],l[1])}t.lineWidth=r.width,t.stroke()}}}catch(t){n=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw s}}}}}},57:function(t,e){},58:function(t,e,n){n(57);var s=n(59)(n(24),n(60),null,null);t.exports=s.exports},60:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"tools"},[n("input",{attrs:{type:"file",name:"img"},on:{change:t.loadImg}}),t._v(" "),n("button",{on:{click:t.settingOriginal}},[t._v("set original")]),t._v(" "),n("span",[t._v(" "+t._s(t.original))]),t._v(" "),n("button",{on:{click:t.addSegment}},[t._v("Add Segment")]),t._v(" "),n("button",{on:{click:t.saveSegment}},[t._v("Save Segment")])]),t._v(" "),n("section",{staticClass:"main",on:{click:function(e){if(!e.ctrlKey)return null;t.removeCoords(null)}}},[n("div",{staticClass:"map"},[n("canvas",{ref:"canvas"}),t._v(" "),n("canvas",{ref:"roads",staticClass:"roads",class:{setting:t.isSetting,add:t.isAddCoords},on:{click:t.clickCanvas,contextmenu:t.rightClickCanvas}})]),t._v(" "),n("div",[n("span",[t._v(t._s(t.results))])]),t._v(" "),n("div",{staticClass:"editor"},t._l(t.segments,function(e){return n("div",{staticClass:"seg",class:{current:e===t.currentSeg}},[n("span",[t._v("id:")]),t._v(" "),n("span",[t._v(t._s(e.id))]),t._v(" "),n("span",[t._v("name:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"seg.name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),t._v(" "),n("span",[t._v("velocity")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.velocity,expression:"seg.velocity"}],attrs:{type:"text"},domProps:{value:e.velocity},on:{input:function(t){t.target.composing||(e.velocity=t.target.value)}}}),t._v(" "),n("span",[t._v("quantity")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"seg.quantity"}],attrs:{type:"text"},domProps:{value:e.quantity},on:{input:function(t){t.target.composing||(e.quantity=t.target.value)}}}),t._v(" "),n("span",[t._v("width")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.width,expression:"seg.width"}],attrs:{type:"text"},domProps:{value:e.width},on:{input:function(t){t.target.composing||(e.width=t.target.value)}}}),t._v(" "),n("button",{on:{click:function(n){t.addCoords(e,n)}}},[t._v("Add Coords")]),t._v(" "),n("button",{on:{click:function(n){t.removeCoords(e)}}},[t._v("Remove Coords")]),t._v(" "),n("div",{staticClass:"coords"},t._l(e.coords,function(s,i){return n("div",[n("span",[t._v(t._s("#"+i+":"))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.coords[i],expression:"seg.coords[idx]"}],attrs:{type:"text"},domProps:{value:e.coords[i]},on:{input:function(t){if(!t.target.composing){var n=e.coords,s=i;Array.isArray(n)?n.splice(s,1,t.target.value):e.coords[i]=t.target.value}}}})])}))])}))])])},staticRenderFns:[]}},64:function(t,e,n){t.exports=n(23)}},[64]);